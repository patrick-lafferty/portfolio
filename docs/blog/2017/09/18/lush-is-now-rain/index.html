<!DOCTYPE html>
<html>

	<head>
	<meta charset="UTF-8">
	<title>Lush is now Rain</title>
	<meta name="description" content="Lush was an interactive Racket shell I started working on Summer 2017 to learn Racket. I renamed it to Rain.">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nothing+You+Could+Do|Raleway">
	<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
	<link rel="alternate" type="application/rss+xml" href="https://patricklafferty.ca/feed.xml">
</head>

	<body>

        <header class="site__header">
	<section class="header__name">
		<p class="name__word">Patrick</p>
		<p class="name__word">Lafferty</p>
	</section>

	<nav class="header__navbar">
		<ul class="navbar__links">
			<li><a class="navbar__link" href="/">Home</a></li>
			<li><a class="navbar__link" href="/#projects">Work</a></li>
			<li><a class="navbar__link" href="/blog">Blog</a></li>
		</ul>
	</nav>

</header>

        
		<main>

            <article class="post single-post">
                <header class="post__header">
                    <p class="post__title">Lush is now Rain</p>
                    <p class="post__date">Sep 18, 2017</p>
                </header>
            
                <section class="post__content">
                    <p>Lush was an interactive Racket shell I started working on this summer to learn Racket. As it turns out there
is already a shell called Lush, the Lisp Universal Shell. So I decided on renaming the project to Rain: 
the <span style="text-decoration: underline">Ra</span>cket <span style="text-decoration: underline">In</span>teractive Shell.</p>

<p>Along with the renaming I decided to make the latest feature public. The first version of code completion just picked one completion for you and filled in the remaining characters in a light grey text next to the characters you were typing. I started working on an ncurses-like interface, and the first feature is a dropdown listbox that shows all the possible completions similar to completion widgets in other IDEs.</p>

<div class="album">
<img src="/images/blogposts/fizzbuzz-with-dropdown.png" />
</div>

<p>To learn more, check out Rainâ€™s <a href="https://patrick-lafferty.github.io/rain/index.html">documentation</a>. You can view its <a href="https://github.com/patrick-lafferty/rain">source</a> and also get the latest release there.</p>

                </section>
            </article>	

            <section class="post__content centered">
                <div class="subscribe">
                    <span>Subscribe with RSS</span>
                    <a href="https://patricklafferty.ca/feed.xml"><img src="/images/feed-icon-28x28.png"></a>
                </div>
            </section>

            <section>
                <h1 class="post__header">Comments</h1>

                <section class="post__content comment__intro">
                    <a href="https://github.com/patrick-lafferty/portfolio/issues/7#new_comment_field" class="comment__post">Post Comment</a>
                    <p>Comments are hosted on the GitHub issue for this post.</p>
                </section>

                <section id="comments">

                </section>
            </section>

        </main>
        
        <script>

            /*
            Based on Don Williamson's  blog post:
            http://donw.io/post/github-comments/

            Comments are taken from the comments posted on the issue for this post

            Create an issue for this post manually, then put the issue id in the 
            post's front matter's issue variable.
            */

            function createComment(data) {
                let date = new Date(data.created_at);
                let dateString = date.toLocaleDateString("en-US", 
                    { weekday: 'short', year: 'numeric', 
                      month: 'long', day: 'numeric', 
                      hour: 'numeric', minute: 'numeric' }
                );
                let comment = document.createElement('section');
                comment.className = "post__content comment";
                comment.innerHTML = `
                    <img src="${data.user.avatar_url}" class="comment__avatar">
                    <p class="comment__name">${data.user.login}</p>
                    <p class="comment__date">${dateString}</p>
                    <div>${data.body_html}</div>
                `;

                return comment;
            }
            
            document.addEventListener("DOMContentLoaded", () => {

                let request = new XMLHttpRequest();
                request.onreadystatechange = () => {
                    let commentsList = document.querySelector("#comments");

                    if (request.readyState === XMLHttpRequest.DONE) {
                        if (request.status === 200) {
                        
                            let response = JSON.parse(request.responseText);

                            response.forEach(commentRaw => {
                                let comment = createComment(commentRaw);
                                commentsList.appendChild(comment);
                            });
                        }                    
                        else {
                            let node = document.createTextNode("Error: GitHub Issue for this post needs to be created");
                            commentsList.appendChild(node);
                        }
                    }
                };

                request.open('GET', 'https://api.github.com/repos/patrick-lafferty/portfolio/issues/7/comments');
                request.setRequestHeader('Accept', 'application/vnd.github.v3.html+json');
                request.send();
            }); 

        </script>

		<footer class="footer">
	<section>
		<p>Copyright (c) 2018 Patrick Lafferty. Powered by Jekyll, design by Patrick Lafferty</p>
	</section>
</footer>


	</body>

</html>
